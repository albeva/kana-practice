<div class="container">
    <div class="mt-5 row text-center">
        @if (game !== undefined) {
            @if (game.word) {
                <a class="h1" href="https://jisho.org/search/{{ game.guess }}" target="_blank" rel="noopener noreferrer">
                    @for (ch of game.parts; track $index) {
                        <span [ngClass]="ch.css">{{ ch.guess }}</span>
                    }
                </a>
            } @else {
                <p class="h1">
                    @for (ch of game.parts; track $index) {
                        <span [ngClass]="ch.css">{{ ch.guess }}</span>
                    }
                </p>
            }
        }
    </div>

    <div class="mt-3 row justify-content-center">
        <div class="col-md-6">
            <input
                id="guessInput"
                #guessInput
                class="form-control form-control-lg shadow-none"
                type="text"
                [(ngModel)]="input"
                (ngModelChange)="update()"
                [ngClass]="{'is-invalid': invalid, 'is-valid': success}"
                placeholder="Write in romaji"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off"
                spellcheck="false"
                autofocus>
        </div>
    </div>

    <div class="mt-3 d-flex justify-content-center fw-bold">
        <div class="px-2 text-success">Correct: {{ successes }}</div>
        <div class="px-2 text-danger">Failed: {{ failures }}</div>
        <div class="px-2 text-primary">Best: {{ best }}</div>
    </div>

    <div class="mt-3 d-flex justify-content-center">
        <div class="px-2">
            <a routerLink="/practice" class="btn btn-outline-secondary" role="button">Cancel</a>
        </div>
        <div class="px-2">
            <button type="button" class="btn btn-warning" (click)="skip()">Skip</button>
        </div>
    </div>
</div>
